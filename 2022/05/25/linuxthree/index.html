<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Linux三剑客的基础学习 | Jughead YQQ</title><meta name="keywords" content="LinuxTree"><meta name="author" content="Jughead YQQ"><meta name="copyright" content="Jughead YQQ"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="来记一下三剑客的内容吧">
<meta property="og:type" content="article">
<meta property="og:title" content="Linux三剑客的基础学习">
<meta property="og:url" content="https://jason177.com/2022/05/25/linuxthree/index.html">
<meta property="og:site_name" content="Jughead YQQ">
<meta property="og:description" content="来记一下三剑客的内容吧">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://cdn.jsdelivr.net/gh/xssqg/image/202203040526746.jpg">
<meta property="article:published_time" content="2022-05-25T08:06:27.000Z">
<meta property="article:modified_time" content="2022-05-25T13:25:11.000Z">
<meta property="article:author" content="Jughead YQQ">
<meta property="article:tag" content="LinuxTree">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://cdn.jsdelivr.net/gh/xssqg/image/202203040526746.jpg"><link rel="shortcut icon" href="https://cdn.jsdelivr.net/gh/xssqg/image/1.jpeg"><link rel="canonical" href="https://jason177.com/2022/05/25/linuxthree/"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//www.google-analytics.com" crossorigin=""/><link rel="preconnect" href="//busuanzi.ibruce.info"/><meta name="google-site-verification" content="IspIaguCg9O4W3zWyG50FDPiJbz9XorXelabPha7i38"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><script async="async" src="https://www.googletagmanager.com/gtag/js?id=G-3ERYSKYBLP"></script><script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-3ERYSKYBLP');
</script><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"search.xml","languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"簡"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":230},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: undefined,
  source: {
    jQuery: 'https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js',
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/js/jquery.justifiedGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/justifiedGallery/dist/css/justifiedGallery.min.css'
    },
    fancybox: {
      js: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js',
      css: 'https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isanchor: false
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'Linux三剑客的基础学习',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2022-05-25 21:25:11'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if (GLOBAL_CONFIG_SITE.isHome && /iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 5.4.0"><link rel="alternate" href="/atom.xml" title="Jughead YQQ" type="application/atom+xml">
</head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="https://cdn.jsdelivr.net/gh/xssqg/image/1.jpeg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="site-data"><div class="data-item is-center"><div class="data-item-link"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a></div></div><div class="data-item is-center"><div class="data-item-link"><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div></div></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 生活</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/shuoshuo"><i class="fa-fw far fa-comment-dots"></i><span> 说说</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-trophy"></i><span> CTF平台</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://ctf.bugku.com/"><i class="fa-fw fas fa-dice-one"></i><span> Bugku</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.ctfhub.com/"><i class="fa-fw fas fa-dice-two"></i><span> CTFHub</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.xctf.org.cn/"><i class="fa-fw fas fa-dice-three"></i><span> XCTF</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.ichunqiu.com/battalion?t=1"><i class="fa-fw fas fa-dice-four"></i><span> i春秋</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="post" id="body-wrap"><header class="post-bg" id="page-header" style="background-image: url('https://cdn.jsdelivr.net/gh/xssqg/image/202203040526746.jpg')"><nav id="nav"><span id="blog_name"><a id="site-name" href="/">Jughead YQQ</a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 首页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 时间轴</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fa fa-heartbeat"></i><span> 生活</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" href="/Gallery/"><i class="fa-fw fas fa-images"></i><span> 照片</span></a></li><li><a class="site-page child" href="/movies/"><i class="fa-fw fas fa-video"></i><span> 电影</span></a></li><li><a class="site-page child" href="/shuoshuo"><i class="fa-fw far fa-comment-dots"></i><span> 说说</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><i class="fa-fw fas fa-trophy"></i><span> CTF平台</span><i class="fas fa-chevron-down expand"></i></a><ul class="menus_item_child"><li><a class="site-page child" target="_blank" rel="noopener" href="https://ctf.bugku.com/"><i class="fa-fw fas fa-dice-one"></i><span> Bugku</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.ctfhub.com/"><i class="fa-fw fas fa-dice-two"></i><span> CTFHub</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.xctf.org.cn/"><i class="fa-fw fas fa-dice-three"></i><span> XCTF</span></a></li><li><a class="site-page child" target="_blank" rel="noopener" href="https://www.ichunqiu.com/battalion?t=1"><i class="fa-fw fas fa-dice-four"></i><span> i春秋</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="/link/"><i class="fa-fw fas fa-link"></i><span> 友链</span></a></div><div class="menus_item"><a class="site-page" href="/messageboard/"><i class="fa-fw far fa-comments"></i><span> 留言板</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page"><i class="fas fa-bars fa-fw"></i></a></div></div></nav><div id="post-info"><h1 class="post-title">Linux三剑客的基础学习</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="far fa-calendar-alt fa-fw post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-25T08:06:27.000Z" title="发表于 2022-05-25 16:06:27">2022-05-25</time><span class="post-meta-separator">|</span><i class="fas fa-history fa-fw post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2022-05-25T13:25:11.000Z" title="更新于 2022-05-25 21:25:11">2022-05-25</time></span><span class="post-meta-categories"><span class="post-meta-separator">|</span><i class="fas fa-inbox fa-fw post-meta-icon"></i><a class="post-meta-categories" href="/categories/Linux/">Linux</a></span></div><div class="meta-secondline"><span class="post-meta-separator">|</span><span class="post-meta-wordcount"><i class="far fa-file-word fa-fw post-meta-icon"></i><span class="post-meta-label">字数总计:</span><span class="word-count">5.7k</span><span class="post-meta-separator">|</span><i class="far fa-clock fa-fw post-meta-icon"></i><span class="post-meta-label">阅读时长:</span><span>22分钟</span></span><span class="post-meta-separator">|</span><span class="post-meta-pv-cv" id="" data-flag-title="Linux三剑客的基础学习"><i class="far fa-eye fa-fw post-meta-icon"></i><span class="post-meta-label">阅读量:</span><span id="busuanzi_value_page_pv"></span></span><span class="post-meta-separator">|</span><span class="post-meta-commentcount"><i class="far fa-comments fa-fw post-meta-icon"></i><span class="post-meta-label">评论数:</span><a href="/2022/05/25/linuxthree/#post-comment"><span id="twikoo-count"></span></a></span></div></div></div></header><main class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container"><h1 id="Linux三剑客特点与应用场景"><a href="#Linux三剑客特点与应用场景" class="headerlink" title="Linux三剑客特点与应用场景"></a>Linux三剑客特点与应用场景</h1><table>
<thead>
<tr>
<th>命令</th>
<th>特点</th>
<th>场景</th>
</tr>
</thead>
<tbody><tr>
<td>grep</td>
<td>过滤</td>
<td>grep命令过滤速度最快</td>
</tr>
<tr>
<td>sed</td>
<td>替换，修改文件内容，取行</td>
<td>如果要进行替换/修改文件内容，或是取出某范围内容(时间范围等)</td>
</tr>
<tr>
<td>awk</td>
<td>取列，统计计算</td>
<td>取列<br />对比，比较 &gt;= 、&lt;=、 != 、&gt;、 &lt;<br/>统计，计算(awk数组)</td>
</tr>
</tbody></table>
<h2 id="grep"><a href="#grep" class="headerlink" title="grep"></a>grep</h2><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/sj349781478/article/details/82930982">linux三剑客</a></p>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/zhongguiyao/p/13940431.html">grep</a></p>
<p><a target="_blank" rel="noopener" href="https://www.linuxprobe.com/linux-grep-sed.html">grep命令</a></p>
<p><strong>-n 显示行号</strong></p>
<p><strong>-v 不包括该内容，相反的</strong></p>
<p>^a 查找a开头的行</p>
<p>a$ 查找a结尾的行</p>
<p><strong>-i 不区分大小写</strong></p>
<p><strong>-c 统计匹配的行数</strong></p>
<p>-e or或关系</p>
<p>-E egrep</p>
<p>-F fgrep，不支持正则表达式</p>
<p>H 多文件匹配</p>
<p>-f </p>
<p>-w 精确匹配</p>
<hr>
<h3 id="H"><a href="#H" class="headerlink" title="-H"></a>-H</h3><p>1.匹配多文件的root</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202111271527529.png" alt="image-20211127152745170"></p>
<h3 id="c"><a href="#c" class="headerlink" title="-c"></a>-c</h3><p>统计次数，跟wc -l是一样的</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205081541652.png" alt="image-20220508154118499"></p>
<p>大概率如果大于3则正常运行，小于3说明有点问题</p>
<p>这里注意最后一行，grep命令吧自己搜索的命令搜出来了，所以apache运行的真实进程是6个，所以正确的判断进程数需要过滤掉grep，使用-v</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ps -aux |grep apache|grep -v grep|wc -l</span><br><span class="line">或者</span><br><span class="line">ps -aux |grep apache|grep -vc grep</span><br></pre></td></tr></table></figure>

<p>也可以在匹配的时候加个中括号[]</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -aux |grep &#x27;[a]pache2&#x27; -c</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205081857808.png" alt="image-20220508185736689"></p>
<p>因为grep执行的时候进程名字grep ‘[a]pache2’</p>
<p>但是在匹配的时候执行的名字是grep ‘apache2’</p>
<p>2.匹配以root或nobody开头的行，记住正则表达式的话要加双引号</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202111271528005.png" alt="image-20211127152842896"></p>
<h3 id="ABC"><a href="#ABC" class="headerlink" title="-ABC"></a>-ABC</h3><p>3.-A(after)显示匹配到的内容的后面行，-B(before)显示匹配到的内容的前面行，-C(context)显示匹配到的内容的周围行。超出范围的就会省略掉</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205060537712.png" alt="image-20220506053722606"></p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205060537673.png" alt="image-20220506053743596"></p>
<h3 id="v"><a href="#v" class="headerlink" title="-v"></a>-v</h3><p>4.-v是不匹配里面的内容，这里说明如何过滤掉空行或者显示空行</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205060540301.png" alt="image-20220506054029231"></p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205060541384.png" alt="image-20220506054116321"></p>
<h3 id="e和-E"><a href="#e和-E" class="headerlink" title="-e和-E"></a>-e和-E</h3><p>5.-e相当于or，实现多选项之间的逻辑关系or</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205060545401.png" alt="image-20220506054516327"></p>
<p>也可以用-E来进行更规范(扩展)的正则表达式的匹配egrep：</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205060547174.png" alt="image-20220506054712068"></p>
<p>基础规范的比如说：</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205060550256.png" alt="image-20220506055059199"></p>
<p>其实就是转不转义的问题</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205060551910.png" alt="image-20220506055126847"></p>
<h3 id="f"><a href="#f" class="headerlink" title="-f"></a>-f</h3><p>可以通过第一个文件查找出来的内容从第二个文件中查找</p>
<p>如果只想显示查找到的内容，则用cat和管道符配合，即利用管道符来通过第一个文件的输出当作第二个文件的输入</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205060621583.png" alt="image-20220506062121497"></p>
<h3 id="w"><a href="#w" class="headerlink" title="-w"></a>-w</h3><p>\b内容\b精确匹配,只查找指定的字符串</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205060612934.png" alt="image-20220506061254876"></p>
<p>“\bot\b”跟”^ot$”是一样的，也可以用-w</p>
<p>一般用来查看进程或端口，比如说过滤22端口</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205081907487.png" alt="image-20220508190714386"></p>
<h3 id="o"><a href="#o" class="headerlink" title="-o"></a>-o</h3><p>只打印匹配到的字符</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205061455016.png" alt="image-20220506145552945"></p>
<h3 id="用正则过滤ip地址"><a href="#用正则过滤ip地址" class="headerlink" title="用正则过滤ip地址"></a>用正则过滤ip地址</h3><figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ifconfig |grep -E &quot;([0-9]&#123;1,3&#125;\.)&#123;3&#125;&quot;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205061448548.png" alt="image-20220506144810397"></p>
<h2 id="sed查"><a href="#sed查" class="headerlink" title="sed查"></a>sed查</h2><p>sed是一种流编辑器，它一次处理一行内容。处理时，把当前处理的行存储在临时缓冲区中，称为“模式空间”（pattern space），接着用sed命令处理缓冲区中的内容，处理完成后，把缓冲区的内容送往屏幕。然后读入下行，执行下一个循环。如果没有使诸如‘D’ 的特殊命令，那会在两个循环之间清空模式空间，但不会清空保留空间。这样不断重复，直到文件末尾。文件内容并没有改变，除非你使用重定向存储输出。</p>
<ul>
<li>sed格式</li>
</ul>
<table>
<thead>
<tr>
<th>命令</th>
<th>选项</th>
<th>(s)sed命令功能(g)修饰符</th>
<th>参数(文件)</th>
</tr>
</thead>
<tbody><tr>
<td>sed</td>
<td>-r</td>
<td>‘s#root#admin#g’</td>
<td>231.txt</td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>sed命令核心功能：增删改查</li>
</ul>
<table>
<thead>
<tr>
<th>功能</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td><strong>s</strong></td>
<td>替换substitute sub</td>
<td></td>
</tr>
<tr>
<td><strong>p</strong></td>
<td>显示print</td>
<td></td>
</tr>
<tr>
<td>d</td>
<td>删除delete</td>
<td></td>
</tr>
<tr>
<td>cai</td>
<td>增加c/a/i</td>
<td></td>
</tr>
</tbody></table>
<h3 id="p"><a href="#p" class="headerlink" title="-p"></a>-p</h3><p>查找</p>
<table>
<thead>
<tr>
<th>查找格式</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>‘2p’</td>
<td>指定行号查找</td>
<td></td>
</tr>
<tr>
<td>‘1,5p’</td>
<td>指定行号范围查找</td>
<td></td>
</tr>
<tr>
<td>‘/root/p’</td>
<td>类似grep，//里面可以写正则</td>
<td></td>
</tr>
<tr>
<td>‘/10:00’,/11:00/p’</td>
<td>表示范围的过滤</td>
<td></td>
</tr>
</tbody></table>
<p>以上内容皆可以混合使用，比如说’sed -n /102/,5p 123123.txt’，就是从内容102开始，打印到第5行结束</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205082143538.png" alt="image-20220508214308467"></p>
<p> 如果是查看第四行到最后一行，则</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;4,$p&#x27; 111.txt</span><br></pre></td></tr></table></figure>

<p>这里的$是指最后一行</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205082106200.png" alt="image-20220508210614130"></p>
<p>如果取最后一行则</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;$p&#x27; 111.txt</span><br><span class="line">或者</span><br><span class="line">tail -1 111.txt</span><br></pre></td></tr></table></figure>

<p>但是我的linux啥都没显示不知道为啥，后来发现老毛病…最后一行是空，因为我习惯在输完内容之后点一下换行，把最后空的一行删掉就行了</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205082112429.png" alt="image-20220508211215354"></p>
<h3 id="p-1"><a href="#p-1" class="headerlink" title="//p"></a>//p</h3><p>查找内容，/内容/p</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;/ro/p&#x27; 213.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205082115351.png" alt="image-20220508211551253"></p>
<p>如果是查找某个内容到某个内容范围之间的内容，则</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;/102/,/106/p&#x27; 123123.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205082127014.png" alt="image-20220508212754936"></p>
<p>如果没有106这个内容，相当于不告诉最后到达的范围，则会从102一直打印到最后一行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;/102/,/10086/p&#x27; 123123.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205082140059.png" alt="image-20220508214005964"></p>
<p>在实际生产环境中，如果日志很大的话，使用vim会把内容一个个放进内存，这时候很可能导致内存不够，所以一般不会直接使用cat和vim，而更多是使用grep/sed/head/tail/more/less/awk</p>
<h3 id="r"><a href="#r" class="headerlink" title="-r"></a>-r</h3><p>如果想要使用扩展的正则表达式，需要用-r</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -n &#x27;/[ro]&#123;3&#125;/p&#x27; 231.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205082123380.png" alt="image-20220508212339254"></p>
<h3 id="n"><a href="#n" class="headerlink" title="-n"></a>-n</h3><p>表示取消默认输出，因为如果什么都不加的话sed命令会显示文件里的所有内容，并且会再显示多一次选中的行，加-n则只显示想要的n行。</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205081940766.png" alt="image-20220508194010684"></p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205081940689.png" alt="image-20220508194025629"></p>
<h3 id=""><a href="#" class="headerlink" title="!"></a>!</h3><p>取反的意思，加在p前面，如果是d的话也是加在前面</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -nr &#x27;/^$|#/!p&#x27; 123123123.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205082305134.png" alt="image-20220508230517062"></p>
<h2 id="sed删除-d"><a href="#sed删除-d" class="headerlink" title="sed删除-d"></a>sed删除-d</h2><p>不是真正的删除 ，只是不显示，这里就是把之前查找使用的p换成d就可以了</p>
<table>
<thead>
<tr>
<th>查找格式</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>‘2d’</td>
<td>指定行号查找</td>
<td></td>
</tr>
<tr>
<td>‘1,5d’</td>
<td>指定行号范围查找</td>
<td></td>
</tr>
<tr>
<td>‘/root/d’</td>
<td>类似grep，//里面可以写正则</td>
<td></td>
</tr>
<tr>
<td>‘/10:00/,/11:00/d’</td>
<td>表示范围的过滤</td>
<td></td>
</tr>
</tbody></table>
<p>d只支持行删除，如果需要删除行的一些内容，则使用的是替换，这里先说删除行的操作</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205082159960.png" alt="image-20220508215901852"></p>
<p>可以看到并没有真正的删除，范围删除也是跟p同样的操作，接下来是内容的删除和内容范围的删除</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205082200622.png" alt="image-20220508220028550"></p>
<p>接下来是混合删除，比如从102的内容删除到第三行(这里说的是第三行而不是接下来的三行)</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205082202609.png" alt="image-20220508220200498"></p>
<p>企业案例删除空行和注释</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">egrep -v &#x27;^$|#&#x27; 231.txt</span><br><span class="line">sed -r &#x27;/^$|#/d&#x27; 231.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205082206351.png" alt="image-20220508220639267"></p>
<h2 id="sed-增加cai"><a href="#sed-增加cai" class="headerlink" title="sed-增加cai"></a>sed-增加cai</h2><table>
<thead>
<tr>
<th>命令</th>
<th>含义</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>c</td>
<td>replace替代这行的内容</td>
<td></td>
</tr>
<tr>
<td><strong>a</strong></td>
<td>append追加，向指定的行或每一行插入内容(行后面)</td>
<td></td>
</tr>
<tr>
<td>i</td>
<td>insert插入，向指定的行或每一行插入内容(行前面)</td>
<td></td>
</tr>
</tbody></table>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205082310784.png" alt="image-20220508231043665"></p>
<p>范围添加行的话</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;1,3a 111&#x27; 123123.txt.bak</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205090158879.png" alt="image-20220509015819778"></p>
<p>企业案例：向文件中追加多行内容</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">向config里面追加</span><br><span class="line">UseDNS no</span><br><span class="line">GSSAPIAUTCATION no</span><br><span class="line">PermitRootLogin no</span><br><span class="line"></span><br><span class="line"><span class="comment">#方法1：</span></span><br><span class="line">cat &gt;&gt;config&lt;&lt;<span class="string">EOF    #如果加入的内容有特殊符号，就用单引号把EOF</span>括起来，如果文件没创建，则是&gt;config&lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">UseDNS no</span></span><br><span class="line"><span class="string">GSSAPIAUTCATION no</span></span><br><span class="line"><span class="string">PermitRootLogin no</span></span><br><span class="line"><span class="string">EOF</span></span><br><span class="line"></span><br><span class="line"><span class="comment">#方法2：sed</span></span><br><span class="line">sed <span class="string">&#x27;$a UseDNS no\nGSSAPIAUTCATION no\nPermitRootLogin no&#x27;</span> config</span><br></pre></td></tr></table></figure>

<p>一般都用第一种方法</p>
<p>config.txt没有创建时</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;config&lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">UseDNS no</span></span><br><span class="line"><span class="string">GSSAPIAUTCATION no</span></span><br><span class="line"><span class="string">PermitRootLogin no</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure>



<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205082323188.png" alt="image-20220508232347102"></p>
<p>创建后</p>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">cat &gt;&gt;config&lt;&lt;<span class="string">EOF</span></span><br><span class="line"><span class="string">UseDNS no</span></span><br><span class="line"><span class="string">GSSAPIAUTCATION no</span></span><br><span class="line"><span class="string">PermitRootLogin no</span></span><br><span class="line"><span class="string">EOF</span></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205082324752.png" alt="image-20220508232414651"></p>
<h2 id="sed替换s"><a href="#sed替换s" class="headerlink" title="sed替换s"></a>sed替换s</h2><p>substitute替换</p>
<table>
<thead>
<tr>
<th align="center">替换格式</th>
</tr>
</thead>
<tbody><tr>
<td align="center"><strong>s###g</strong> (前两个#之间支持正则)</td>
</tr>
<tr>
<td align="center">s@@@g</td>
</tr>
<tr>
<td align="center">s///g</td>
</tr>
</tbody></table>
<p>其中，g是global全局的意思，有g就是全部都替换</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;s#[0-9]##g&#x27; 123123.txt   #把所有数字替换为空</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205090052952.png" alt="image-20220509005230849"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed &#x27;s#[0-9]##&#x27; 123123.txt   #只把每行的第一个数字替换为空</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205090052110.png" alt="image-20220509005242020"></p>
<p>如果只想要替换某范围内匹配到的内容，则</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -r &#x27;1,4&#123;s#[ ]#hah#&#125;&#x27; 123123.txt.bak   # 第一行到第四行匹配到的空格替换成haha</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205090204342.png" alt="image-20220509020413219"></p>
<ul>
<li>后向引用，反向引用</li>
<li>口诀：先保护再引用</li>
</ul>
<h3 id="1-把数据规则化-比如每行用括号括起来"><a href="#1-把数据规则化-比如每行用括号括起来" class="headerlink" title="1.把数据规则化(比如每行用括号括起来)"></a>1.把数据规则化(比如每行用括号括起来)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">原始内容：</span><br><span class="line">101 beijing</span><br><span class="line">102 shanghai</span><br><span class="line">103 fangcheng</span><br><span class="line">104 sanming</span><br><span class="line">105 chongqing</span><br><span class="line">106 tianjing</span><br><span class="line">107 jiangsu</span><br><span class="line">108 beihai</span><br><span class="line">如果想要用括号把每行的数据一次性都括起来，则可以使用：</span><br><span class="line">sed -r  &#x27;s#(.*)#&lt;\1&gt;#g&#x27; 123123.txt    #其中，小括号是为了保护数据内容，.*是匹配所有内容，\1就是第一个括号的内容</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205090059237.png" alt="image-20220509005949140"></p>
<h3 id="2-调换位置"><a href="#2-调换位置" class="headerlink" title="2.调换位置"></a>2.调换位置</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">原始内容：</span><br><span class="line">101 beijing</span><br><span class="line">102 shanghai</span><br><span class="line">103 fangcheng</span><br><span class="line">104 sanming</span><br><span class="line">105 chongqing</span><br><span class="line">106 tianjing</span><br><span class="line">107 jiangsu</span><br><span class="line">108 beihai</span><br><span class="line">如果想要把前后数据调换位置：</span><br><span class="line">sed -r &#x27;s#(.*) (.*)#\2 \1#g&#x27; 123123.txt</span><br><span class="line">或者</span><br><span class="line">sed -r &#x27;s#([0-9]*) ([a-Z]*)#\2 \1#g&#x27; 123123.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205090109068.png" alt="image-20220509010955990"></p>
<h3 id="3-取ip地址"><a href="#3-取ip地址" class="headerlink" title="3.取ip地址"></a>3.取ip地址</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">显示某一个指定网卡的命令是：</span><br><span class="line">ip a s eth0     # ip address show eth0</span><br><span class="line">取ip地址就是：</span><br><span class="line">ip a s eth0|sed -n &#x27;3p&#x27;|sed -r &#x27;s#.*t (.*)/.*#IP:\1#g&#x27;</span><br><span class="line">精简一下就：</span><br><span class="line">ip a s eth0|sed -rn &#x27;3s#.*t (.*)/.*#IP:\1#gp&#x27;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205090129844.png" alt="image-20220509012908749"></p>
<h3 id="4-取权限644"><a href="#4-取权限644" class="headerlink" title="4.取权限644"></a>4.取权限644</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">stat /etc/hosts                                                                                                                                                                                           1 ⨯</span><br><span class="line">  文件：/etc/hosts</span><br><span class="line">  大小：184             块：8          IO 块：4096   普通文件</span><br><span class="line">设备：801h/2049d        Inode：2621721     硬链接：1</span><br><span class="line">权限：(0644/-rw-r--r--)  Uid：(    0/    root)   Gid：(    0/    root)</span><br><span class="line">最近访问：2022-05-08 03:38:47.024672339 -0400</span><br><span class="line">最近更改：2021-05-30 17:09:30.474899032 -0400</span><br><span class="line">最近改动：2021-05-30 17:09:30.474899032 -0400</span><br><span class="line">创建时间：2021-05-30 17:09:29.550899058 -0400</span><br><span class="line"></span><br><span class="line">取权限644：</span><br><span class="line">stat /etc/hosts |sed -nr &#x27;4s#.*0(.*)/-.*#\1#gp&#x27;</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205090139329.png" alt="image-20220509013952225"></p>
<p>这里说一下其实stat就是有想要的内容了</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">stat -c%a /etc/hosts   #命令结果有想要的内容或不想要的内容，先别急着用管道，我先看看命令帮助</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205090141726.png" alt="image-20220509014145638"></p>
<h3 id="i"><a href="#i" class="headerlink" title="-i"></a>-i</h3><p>修改文件内容，不加-i默认只是预览(<strong>需要注意的是参数需要按顺序，比如ir就是先写入然后再支持扩展正则，这是不对的，必须要先支持扩展正则再写入</strong>)</p>
<h3 id="i-bak"><a href="#i-bak" class="headerlink" title="-i.bak"></a>-i.bak</h3><p>备份文件并原处编辑</p>
<p>把文件备份到bak之后修改源文件为指定格式</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed -r -i.bak &#x27;s#([0-9]*) ([a-Z]*)#\2 \1#g&#x27; 123123.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205090154191.png" alt="image-20220509015411066"></p>
<h2 id="sed的一些暂时看不懂的操作命令"><a href="#sed的一些暂时看不懂的操作命令" class="headerlink" title="sed的一些暂时看不懂的操作命令"></a>sed的一些暂时看不懂的操作命令</h2><h3 id="显示行号-其实应该就是替换的操作"><a href="#显示行号-其实应该就是替换的操作" class="headerlink" title="显示行号(其实应该就是替换的操作)"></a>显示行号(其实应该就是替换的操作)</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">sed = 231.txt | sed &#x27;N;s/\n/:/&#x27;		# 在231.txt的每行开始添加行号，就是每次匹配到一个换行就加个冒号，也不知道啥意思</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;cat 231.txt</span></span><br><span class="line">root</span><br><span class="line">roooot</span><br><span class="line">rot</span><br><span class="line">rooooot</span><br><span class="line">Root</span><br><span class="line">ROOT</span><br><span class="line">123ssss</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;sed = 231.txt | sed <span class="string">&#x27;N;s/\n/:/&#x27;</span></span>	</span><br><span class="line">1:root</span><br><span class="line">2:roooot</span><br><span class="line">3:rot</span><br><span class="line">4:rooooot</span><br><span class="line">5:Root</span><br><span class="line">6:ROOT</span><br><span class="line">7:123ssss</span><br></pre></td></tr></table></figure>

<p>如果想要查询包含root的(不区分大小写)并且显示行号，则</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&gt;&gt;&gt;sed = 231.txt | sed &#x27;N;s/\n/:/&#x27; |sed -n &#x27;/root/Ip&#x27; </span><br><span class="line">1:root</span><br><span class="line">5:Root</span><br><span class="line">6:ROOT</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>证明一下为什么我会说显示行号就是替换操作</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;sed = 231.txt | sed <span class="string">&#x27;N;s/\n/:/&#x27;</span> |sed -n <span class="string">&#x27;/^root/Ip&#x27;</span></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 然后什么都没输出，说明没有开头是root的行</span></span><br></pre></td></tr></table></figure>

<p>更多sed操作内容看<a target="_blank" rel="noopener" href="https://blog.51cto.com/leyin01/1704626">这里</a></p>
<p><strong>sed [option] ‘script’ inputfile</strong></p>
<blockquote>
<p>1.选项</p>
<ul>
<li>-n 不输出模式空间内容到屏幕，即不自动打印</li>
<li>-e 多点编辑</li>
<li>-f /PATH/SCRIPT_FILE: 从指定文件中读取编辑脚本</li>
<li>-r 支持使用扩展正则表达式</li>
<li>-i 直接编辑文件</li>
<li>-i.bak 备份文件并原处编辑</li>
</ul>
<p>2.script 地址定界</p>
<ul>
<li><p>不给地址：对全文进行处理</p>
</li>
<li><p>单地址：</p>
<p><code>#</code>: 指定的行，$：最后一行<br><code>/pattern/</code>：被此处模式所能够匹配到的每一行</p>
</li>
<li><p>地址范围：</p>
<p><code>#,#</code><br><code>#,+#</code><br><code>/pat1/,/pat2/</code><br>`#,/pat1/</p>
</li>
<li><p>~：步进</p>
<p>1~2 奇数行</p>
<p>2~2 偶数行</p>
</li>
</ul>
<p>3.编辑命令：</p>
<ul>
<li><p><code>d</code> 删除模式空间匹配的行，并立即启用下一轮循环</p>
</li>
<li><p><code>p</code> 打印当前模式空间内容，追加到默认输出之后</p>
</li>
<li><p><code>a [\]text1</code> 在指定行后面追加文本,支持使用\n实现多行追加</p>
</li>
<li><p><code>i [\]text</code> 在行前面插入文本</p>
</li>
<li><p><code>c [\]text</code> 替换行为单行或多行文本</p>
</li>
<li><p><code>w /path/somefile</code> 保存模式匹配的行至指定文件</p>
</li>
<li><p><code>r /path/somefile</code> 读取指定文件的文本至模式空间中匹配到的行后</p>
</li>
<li><p><code>=</code> 为模式空间中的行打印行号</p>
</li>
<li><p><code>!</code> 模式空间中匹配行取反处理</p>
</li>
<li><p>s///：查找替换,支持使用其它分隔符，s@@@，s###</p>
<p>替换标记：</p>
<ul>
<li><code>g</code> 行内全局替换</li>
<li><code>p</code> 显示替换成功的行</li>
<li><code>w /PATH/TO/SOMEFILE</code> 将替换成功的行保存至文件中</li>
</ul>
</li>
</ul>
</blockquote>
<p>1.打印出文件第二行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> cat testzhengze.txt</span></span><br><span class="line">linux</span><br><span class="line">alan</span><br><span class="line">liinux</span><br><span class="line">jason</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> sed -n 2p testzhengze.txt</span> </span><br><span class="line">alan</span><br></pre></td></tr></table></figure>

<p>2.打印出文件第二行到第四行</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sed -n 2,4p testzhengze.txt</span></span><br><span class="line">alan</span><br><span class="line">liinux</span><br><span class="line">jason</span><br></pre></td></tr></table></figure>

<p>3.文件中的nux全部替换为abc</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> sed -i s/nux/abc/g testzhengze.txt</span> </span><br><span class="line"><span class="meta">#</span><span class="bash"> cat testzhengze.txt</span>               </span><br><span class="line">liabc</span><br><span class="line">alan</span><br><span class="line">liiabc</span><br><span class="line">jason</span><br></pre></td></tr></table></figure>

<p>直接修改读取的文件内容，而不是输出到终端。<br>s ：取代，可以直接进行取代的工作。</p>
<p>g: 是全局的意思。其中#是格式符，他也可以是@或者别的/。</p>
<p>Sed替换格式是：sed -i ‘s/要替换的内容/替换成的内容/g’ 文件名。</p>
<h2 id="awk"><a href="#awk" class="headerlink" title="awk"></a>awk</h2><table>
<thead>
<tr>
<th align="center">awk</th>
</tr>
</thead>
<tbody><tr>
<td align="center">一门类似于C的语言</td>
</tr>
<tr>
<td align="center">过滤，统计，与计算有关</td>
</tr>
<tr>
<td align="center">过滤，统计日志</td>
</tr>
</tbody></table>
<p>awk的流程大致如下：可以看到在读取文件之前的begin就可以执行命令了</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205091342593.png" alt="image-20220509134224422"></p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 简单的执行操作就是</span></span><br><span class="line">-F可以指定分隔符，默认是空格，尝试一下分隔符为逗号的</span><br><span class="line">先把123123.txt的空格替换成逗号&quot;,&quot;</span><br><span class="line">sed -ri &#x27;s#[ ]#,#g&#x27; 123123.txt</span><br><span class="line">然后内容就是</span><br><span class="line">cat 123123.txt                </span><br><span class="line">beijing,101</span><br><span class="line">shanghai,102</span><br><span class="line">fangcheng,103</span><br><span class="line">sanming,104</span><br><span class="line">chongqing,105</span><br><span class="line">tianjing,106</span><br><span class="line">jiangsu,107</span><br><span class="line">beihai,108</span><br><span class="line"></span><br><span class="line">然后想要打印里面的城市名称则可以：</span><br><span class="line">awk -F, &#x27;BEGIN&#123;print &quot;name&quot;&#125;&#123;print $1&#125;END&#123;print &quot;END&quot;&#125;&#x27; 123123.txt   #在—F后面加分隔符就行了</span><br><span class="line">这里是默认按照逗号来分隔的，第一列就是城市的名称，第二列就是序号，然后BEGIN和END都可以加内容，也可以指定显示某行</span><br><span class="line">awk -F, &#x27;BEGIN&#123;print &quot;name&quot;&#125;NR==2&#123;print $1&#125;END&#123;print &quot;END&quot;&#125;&#x27; 123123.txt</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205091406236.png" alt="image-20220509140659125">取行</p>
<h3 id="行与列"><a href="#行与列" class="headerlink" title="行与列"></a>行与列</h3><table>
<thead>
<tr>
<th>名词</th>
<th>awk中的叫法</th>
<th>一些说明</th>
</tr>
</thead>
<tbody><tr>
<td>行</td>
<td>记录 record</td>
<td>每一行默认通过回车来分割</td>
</tr>
<tr>
<td>列</td>
<td>字段，域 field</td>
<td>每一列默认通过空格分割</td>
</tr>
<tr>
<td>awk中行和列结束标记都可以修改</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p>awk的内置变量</p>
<table>
<thead>
<tr>
<th>内置变量</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>NR</td>
<td>Number of Record 记录号，行号</td>
<td></td>
</tr>
<tr>
<td>NF</td>
<td>Number of Field 每行有多少个字段 $NF表示最后列</td>
<td></td>
</tr>
<tr>
<td>FS</td>
<td>-F:    ===-v FS=:      Field Separator 字段分隔符，每个字段结束标记,<strong>支持正则与扩展正则</strong></td>
<td></td>
</tr>
<tr>
<td>OFS</td>
<td>Output Field Separator 输出字段分隔符(awk显示每一列的时候每一列之间通过什么分割，默认是空格)</td>
<td></td>
</tr>
</tbody></table>
<ul>
<li>取行</li>
</ul>
<table>
<thead>
<tr>
<th>常用的awk条件</th>
<th></th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>NR==1</td>
<td>取出某1行</td>
<td></td>
</tr>
<tr>
<td>NR&gt;=1&amp;&amp;NR&lt;=5</td>
<td>取出1到5行范围</td>
<td></td>
</tr>
<tr>
<td>/root/</td>
<td>过滤</td>
<td></td>
</tr>
<tr>
<td>/103/,/107/</td>
<td>过滤内容范围</td>
<td></td>
</tr>
<tr>
<td>符号</td>
<td>&gt; 、&lt; 、&gt;=、 &lt;=、 ==、 !=</td>
<td></td>
</tr>
</tbody></table>
<p>过滤出2到5行</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205091428002.png" alt="image-20220509142815916"></p>
<p>过滤102到106的内容</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205091430211.png" alt="image-20220509143000136"></p>
<ul>
<li>取列</li>
</ul>
<p>-F表示指定分隔符，即指定每一列结束标记(默认空格，连续的空格，tab键)</p>
<p>$数字表示取出该数字指定的列</p>
<p>$0表示整行</p>
<p>$NF 表示最后一列</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br></pre></td><td class="code"><pre><span class="line">ls -l |awk &#x27;print&#123;$1&#125;&#x27;</span><br><span class="line">总用量</span><br><span class="line">-rw-r--r--</span><br><span class="line">-rw-r--r--</span><br><span class="line">-rw-r--r--</span><br><span class="line">-rw-r--r--</span><br><span class="line">-rw-r--r--</span><br><span class="line">-rw-r--r--</span><br><span class="line">-rw-r--r--</span><br><span class="line">-rw-r--r--</span><br><span class="line">drwxr-xr-x</span><br><span class="line">drwxr-xr-x</span><br><span class="line">drwxr-xr-x</span><br><span class="line">drwxr-xr-x</span><br><span class="line">drwxr-xr-x</span><br><span class="line">drwxr-xr-x</span><br><span class="line">drwxr-xr-x</span><br><span class="line">drwxr-xr-x</span><br><span class="line">-rw-r--r--</span><br><span class="line">-rw-r--r--</span><br><span class="line">-rw-r--r--</span><br><span class="line">drwxr-xr-x</span><br><span class="line">-rw-------</span><br><span class="line">-rw-r--r--</span><br><span class="line">-rw-r--r--</span><br><span class="line"></span><br><span class="line">也可以取整行</span><br><span class="line">ls -l | awk   &#x27;NR==2&#123;print $0&#125;&#x27;</span><br><span class="line">-rw-r--r--  1 root root      12  5月  8 09:10 111.txt</span><br><span class="line">或者取某列跟某列</span><br><span class="line">ls -l |awk &#x27;&#123;print $5,$9&#125;&#x27; |column -t     #column -t 把内容对齐</span><br><span class="line"></span><br><span class="line">12       111.txt</span><br><span class="line">44       123123123.txt</span><br><span class="line">101      123123.txt</span><br><span class="line">101      123123.txt.bak</span><br><span class="line">94       123.txt</span><br><span class="line">1162     12.txt</span><br><span class="line">13       1.txt</span><br><span class="line">165      231.txt</span><br><span class="line">4096     公共</span><br><span class="line">4096     模板</span><br><span class="line">4096     视频</span><br><span class="line">4096     图片</span><br><span class="line">4096     文档</span><br><span class="line">4096     下载</span><br><span class="line">4096     音乐</span><br><span class="line">4096     桌面</span><br><span class="line">96       config.txt</span><br><span class="line">73802    demo01.exe</span><br><span class="line">73802    demo.exe</span><br><span class="line">4096     dvcs-ripper</span><br><span class="line">3501200  notepad++.exe</span><br><span class="line">33       password.txt</span><br><span class="line">27       user.txt</span><br><span class="line"></span><br><span class="line">不知道最后一列是第几列的话就用NF</span><br><span class="line">ls -l |awk &#x27;&#123;print $5,$NF&#125;&#x27; |column -t</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205091501865.png" alt="image-20220509150109739"></p>
<p>也可以在中间添加一些什么内容</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205091503804.png" alt="image-20220509150318716"></p>
<p>如果想要保留分隔符或者替换分隔符，就要用到-v OFS</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">awk -F: -v OFS=, &#x27;&#123;print $1,$2,$3,$4$NF&#125;&#x27; /etc/passwd |column -t</span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205091509405.png" alt="image-20220509150912289"></p>
<h3 id="取出ip地址"><a href="#取出ip地址" class="headerlink" title="取出ip地址"></a>取出ip地址</h3><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ip a s eth0 |awk -F&quot;[ /]+&quot; &#x27;NR==3&#123;print $3&#125;&#x27;   #满足NR==3才print</span><br><span class="line">192.168.29.137</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="模式匹配"><a href="#模式匹配" class="headerlink" title="模式匹配"></a>模式匹配</h3><ul>
<li>谁可以作为awk的条件</li>
</ul>
<table>
<thead>
<tr>
<th>awk</th>
<th>-F”[ /]+”</th>
<th>‘NR==3{print $3}’</th>
</tr>
</thead>
<tbody><tr>
<td>命令</td>
<td>选项</td>
<td>‘条件{动作}’</td>
</tr>
<tr>
<td></td>
<td></td>
<td>‘找谁{干啥}’</td>
</tr>
<tr>
<td></td>
<td></td>
<td>‘模式{动作}’</td>
</tr>
<tr>
<td></td>
<td></td>
<td>‘pattern{action}’</td>
</tr>
</tbody></table>
<ul>
<li>比较符号：&gt;、&lt;、&gt;=、&lt;=、==、!=</li>
<li>正则</li>
<li>范围 表达式</li>
<li>特殊条件：BEGIN和END</li>
</ul>
<h4 id="正则"><a href="#正则" class="headerlink" title="正则"></a>正则</h4><ul>
<li>// 支持扩展正则</li>
<li>awk可以精确到某一列，某一列中包含或不包含内容：波浪线”~”</li>
<li>“~”包含</li>
<li>“!~”不包含</li>
</ul>
<table>
<thead>
<tr>
<th>正则</th>
<th>awk正则</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>^  表示以…开头的行</td>
<td>某一列的开头  $3~/^root/</td>
<td></td>
</tr>
<tr>
<td>$  表示以…结尾的行</td>
<td>某一列的结尾  $3~/root$/</td>
<td></td>
</tr>
<tr>
<td>^$ 表示空行</td>
<td>某一列是空的  很少用</td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">显示第三列以1开头的内容</span></span><br><span class="line">awk -F: &#x27;$3~/^1/&#x27; /etc/passwd</span><br><span class="line">daemon:x:1:1:daemon:/usr/sbin:/usr/sbin/nologin</span><br><span class="line">uucp:x:10:10:uucp:/var/spool/uucp:/usr/sbin/nologin</span><br><span class="line">proxy:x:13:13:proxy:/bin:/usr/sbin/nologin</span><br><span class="line">_apt:x:100:65534::/nonexistent:/usr/sbin/nologin</span><br><span class="line">systemd-timesync:x:101:101:systemd Time Synchronization,,,:/run/systemd:/usr/sbin/nologin</span><br><span class="line">systemd-network:x:102:103:systemd Network Management,,,:/run/systemd:/usr/sbin/nologin</span><br><span class="line">systemd-resolve:x:103:104:systemd Resolver,,,:/run/systemd:/usr/sbin/nologin</span><br><span class="line">mysql:x:104:110:MySQL Server,,,:/nonexistent:/bin/false</span><br><span class="line">tss:x:105:111:TPM software stack,,,:/var/lib/tpm:/bin/false</span><br><span class="line">strongswan:x:106:65534::/var/lib/strongswan:/usr/sbin/nologin</span><br><span class="line">ntp:x:107:112::/nonexistent:/usr/sbin/nologin</span><br><span class="line">messagebus:x:108:113::/nonexistent:/usr/sbin/nologin</span><br><span class="line">redsocks:x:109:114::/var/run/redsocks:/usr/sbin/nologin</span><br><span class="line">rwhod:x:110:65534::/var/spool/rwho:/usr/sbin/nologin</span><br><span class="line">iodine:x:111:65534::/run/iodine:/usr/sbin/nologin</span><br><span class="line">miredo:x:112:65534::/var/run/miredo:/usr/sbin/nologin</span><br><span class="line">_rpc:x:113:65534::/run/rpcbind:/usr/sbin/nologin</span><br><span class="line">usbmux:x:114:46:usbmux daemon,,,:/var/lib/usbmux:/usr/sbin/nologin</span><br><span class="line">tcpdump:x:115:121::/nonexistent:/usr/sbin/nologin</span><br><span class="line">rtkit:x:116:122:RealtimeKit,,,:/proc:/usr/sbin/nologin</span><br><span class="line">sshd:x:117:65534::/run/sshd:/usr/sbin/nologin</span><br><span class="line">statd:x:118:65534::/var/lib/nfs:/usr/sbin/nologin</span><br><span class="line"></span><br><span class="line">注意这里加不加&#123;&#125;，是有区别的</span><br><span class="line"> awk -F: &#x27;&#123;print $3~/^1/&#125;&#x27; /etc/passwd#有&#123;&#125;则表示该列里面是否包含开头为1的内容，如果该行的列不符合，则输出0，符合则输出1</span><br><span class="line"> </span><br></pre></td></tr></table></figure>

<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205091538496.png" alt="image-20220509153830355"></p>
<p>可以看到符合1开头有第二行、第十一行和第十二行…</p>
<p><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202205091539692.png" alt="image-20220509153933583"></p>
<p>加了花括号输出结果是这样的，符合条件输出1，不符合输出0</p>
<p><strong>不加花括号是条件，加花括号表示动作</strong></p>
<h4 id="找出第三列以2开头的行，并显示第一列第三列和最后一列"><a href="#找出第三列以2开头的行，并显示第一列第三列和最后一列" class="headerlink" title="找出第三列以2开头的行，并显示第一列第三列和最后一列"></a>找出第三列以2开头的行，并显示第一列第三列和最后一列</h4><figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk -F: &#x27;$3~/^2/&#123;print $1,$3,$NF&#125;&#x27; /etc/passwd</span><br><span class="line">bin 2 /usr/sbin/nologin</span><br></pre></td></tr></table></figure>

<h4 id="取范围"><a href="#取范围" class="headerlink" title="//,//取范围"></a>//,//取范围</h4><p>取范围的话在演示行与列的时候就试过了，这里尝试一下取范围之后再取指定的列awk</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">awk -F: &#x27;/102/,/105/&#123;print $NF&#125;&#x27; /etc/passwd</span><br><span class="line">/usr/sbin/nologin</span><br><span class="line">/usr/sbin/nologin</span><br><span class="line">/bin/false</span><br><span class="line">/bin/false</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>企业取范围查看内容一般就是取时间范围，然后取状态码、url、ip</p>
<h4 id="特殊模式BEGIN-和END"><a href="#特殊模式BEGIN-和END" class="headerlink" title="特殊模式BEGIN{}和END{}"></a>特殊模式BEGIN{}和END{}</h4><table>
<thead>
<tr>
<th>模式</th>
<th>含义</th>
<th>应用场景</th>
</tr>
</thead>
<tbody><tr>
<td>BEGIN{}</td>
<td>里面内容会在awk<strong>读取文件之前</strong>执行</td>
<td>1)进行简单统计、计算，不涉及读取文件(常见)<br/>2)用来处理文件之前添加表头<br/>3)用来定义awk变量(很少用，因为可以用-v)</td>
</tr>
<tr>
<td>END{}</td>
<td>里面内容会在awk<strong>读取文件之后</strong>执行</td>
<td>1)awk进行统计，一般过程:先进行计算，再END输出结果<br/>2)awk使用数组，用来输出数组结果</td>
</tr>
</tbody></table>
<ul>
<li>END{}统计计算:</li>
<li>统计方法</li>
</ul>
<table>
<thead>
<tr>
<th>统计方法</th>
<th>简写</th>
<th>应用场景</th>
</tr>
</thead>
<tbody><tr>
<td>i=i+1</td>
<td>i++</td>
<td>计数，统计次数</td>
</tr>
<tr>
<td>sum=sum+???</td>
<td>sum+=???</td>
<td>求和，累加</td>
</tr>
<tr>
<td>array[]=array[]+1</td>
<td>array[]++</td>
<td>数组分类计数</td>
</tr>
<tr>
<td>注意，i和sum都是变量</td>
<td></td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 统计空行个数</span></span><br><span class="line">awk &#x27;/^$/&#123;i++&#125;END&#123;print i&#125;&#x27; /etc/services</span><br><span class="line">6</span><br></pre></td></tr></table></figure>

<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 统计列的总和sum</span></span><br><span class="line">seq 100 | awk &#x27;&#123;sum=sum+$1&#125;END&#123;print sum&#125;&#x27;</span><br><span class="line">5050</span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果想知道打印的过程</span></span><br><span class="line">seq 100 | awk &#x27;&#123;sum=sum+$1;print sum&#125;END&#123;print sum&#125;&#x27;</span><br><span class="line">1</span><br><span class="line">3</span><br><span class="line">6</span><br><span class="line">10</span><br><span class="line">15</span><br><span class="line">21</span><br><span class="line">28</span><br><span class="line">36</span><br><span class="line">45</span><br><span class="line">55</span><br><span class="line">66</span><br><span class="line">78</span><br><span class="line">91</span><br><span class="line">105</span><br><span class="line">120</span><br><span class="line">...</span><br><span class="line">5050</span><br></pre></td></tr></table></figure>

<h3 id="awk数组"><a href="#awk数组" class="headerlink" title="awk数组"></a>awk数组</h3><p>统计日志：类似于</p>
<ul>
<li>统计每个ip出现次数,统计每种状态码出现次数,统计系统中每个用户被攻击的次数,统计攻击者ip出现次数</li>
<li>累加求和：统计每个ip消耗的流量</li>
</ul>
<table>
<thead>
<tr>
<th></th>
<th>shell数组</th>
<th>awk数组</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>形式</td>
<td>array[0]=root array[1]=jason</td>
<td>array[0]=”root” array[1]=”jason”</td>
<td></td>
</tr>
<tr>
<td>使用</td>
<td>echo ${array[0]} ${array[1]}</td>
<td>print array[0] array[1]</td>
<td></td>
</tr>
<tr>
<td>批量输出数组内容</td>
<td>for i in ${array[*]}<br/>do<br/>    echo $i<br/>done</td>
<td>for(i in array)<br/>   print i</td>
<td><strong>awk数组专用循环</strong>，变量获取到的是数组的下标，想要数组的内容则a[i]</td>
</tr>
</tbody></table>
<p>awk中字母会被识别为变量，所以如果只是想使用字符串需要用双引号引起来,如果是数字就不用</p>
<ul>
<li>普通输出</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;a[0]=102;a[1]=104;print a[0],a[1]&#125;&#x27;</span><br><span class="line">102 104</span><br><span class="line">awk &#x27;BEGIN&#123;a[0]=&quot;root&quot;;a[1]=&quot;jason&quot;;print a[0],a[1]&#125;&#x27;</span><br><span class="line">root jason</span><br></pre></td></tr></table></figure>

<ul>
<li>批量输出</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;a[0]=&quot;root&quot;;a[1]=&quot;jason&quot;;for(i in a)print a[i]&#125;&#x27;</span><br><span class="line">root</span><br><span class="line">jason</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li>实际案例</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash"> 处理一下文件内容，将域名取出并根据域名进行计数排序处理：(百度和sohu面试题)</span></span><br><span class="line">http://www.etiantian.org/index.html</span><br><span class="line">http://www.etiantian.org/1.html</span><br><span class="line">http://post.etiantian.org/index.html</span><br><span class="line">http://mp3.etiantian.org/index.html</span><br><span class="line">http://www.etiantian.org/3.html</span><br><span class="line">http://post.etiantian.org/2.htm1</span><br><span class="line"></span><br><span class="line">www.etiantian.org 出现的次数</span><br><span class="line">post.etiantian.org 出现次数</span><br><span class="line">mp3.etiantian.org 出现次数</span><br><span class="line"></span><br><span class="line">把以上url取出存放到awkurl.txt之后</span><br><span class="line">awk -F&quot;[/.]+&quot; &#x27;&#123;print $2&#125;&#x27; awkurl.txt    # 这里的话//算是一个分隔符，.算分隔符，/也算一个分隔符</span><br><span class="line">www</span><br><span class="line">www</span><br><span class="line">post</span><br><span class="line">mp3</span><br><span class="line">www</span><br><span class="line">post</span><br><span class="line">得到列之后需要使用数组计数</span><br><span class="line">awk -F&quot;[/.]+&quot; &#x27;&#123;array[$2]++&#125;END&#123;for(i in array)print i,array[i]&#125;&#x27; awkurl.txt     # i就是中括号里的内容，即域名，																					array[i]就是次数</span><br><span class="line">www 3</span><br><span class="line">mp3 1</span><br><span class="line">post 2</span><br><span class="line"></span><br><span class="line">如果想要根据数量排序则用管道符|sort -rnk2     #r是逆序 n是数字 k2是列</span><br><span class="line"><span class="meta">#</span><span class="bash">array[]++ 你要统计什么 []里面就是什么(某一列)</span></span><br><span class="line"><span class="meta">#</span><span class="bash">统计ip次数也是array[<span class="variable">$ip</span>的列]++</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="awk-for循环"><a href="#awk-for循环" class="headerlink" title="awk(for循环)"></a>awk(for循环)</h3><table>
<thead>
<tr>
<th>shell编程c语言for循环</th>
<th>awkfor循环</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>for((i=1;i&lt;=10;i++))<br/>do<br/>   echo $i<br/>done</td>
<td>for(i=1;i&lt;=10;i++)<br/>print i</td>
<td>awk for循环用来循环每个字段</td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">awk &#x27;BEGIN&#123;for(i=1;i&lt;=100;i++)sum+=i;print sum&#125;&#x27;</span><br><span class="line">5050</span><br></pre></td></tr></table></figure>



<h3 id="awk-if判断"><a href="#awk-if判断" class="headerlink" title="awk(if判断)"></a>awk(if判断)</h3><table>
<thead>
<tr>
<th>shell if判断</th>
<th>awk if</th>
<th></th>
</tr>
</thead>
<tbody><tr>
<td>if [“oldhuang” -eq 18];then<br/>echo take to dbj<br/>fi</td>
<td>if(条件)<br/>print “dbj”</td>
<td>常用</td>
</tr>
<tr>
<td>if [“oldhuang” -eq 18];then<br/>    echo take to dbj<br/>else<br/>    echo  “rest”<br/>fi</td>
<td>if()<br/>   print “dbj”<br/>else<br/>   print “rest”</td>
<td></td>
</tr>
</tbody></table>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;df -h</span></span><br><span class="line">文件系统        容量  已用  可用 已用% 挂载点</span><br><span class="line">udev            952M     0  952M    0% /dev</span><br><span class="line">tmpfs           198M  1.2M  197M    1% /run</span><br><span class="line">/dev/sda1        78G   14G   60G   19% /</span><br><span class="line">tmpfs           988M  4.0K  988M    1% /dev/shm</span><br><span class="line">tmpfs           5.0M     0  5.0M    0% /run/lock</span><br><span class="line">tmpfs           198M   68K  198M    1% /run/user/0</span><br><span class="line">tmpfs           198M   60K  198M    1% /run/user/132</span><br><span class="line"><span class="meta">#</span><span class="bash">查看磁盘空间情况</span></span><br><span class="line"><span class="meta">#</span><span class="bash">判断如果磁盘空间大于10%的话就输出磁盘空间不够</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;df -h |awk -F<span class="string">&quot;[ %]+&quot;</span> <span class="string">&#x27;NR&gt;1&#123;if($5&gt;=10)print &quot;disk not enough&quot;,$1,$NF&#125;&#x27;</span></span></span><br><span class="line">disk not enough /dev/sda1 /       #挂载点/磁盘空间不足，磁盘分区是/dev/sda1</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash"> 如果还想要把第一行先输出出来并保存到一个文本中，则</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;df -h |  awk -F<span class="string">&quot;[ %]+&quot;</span> <span class="string">&#x27;NR==1&#123;print $0&#125;NR&gt;1&#123;if($5&gt;10)print $0&#125;&#x27;</span> |column -t &gt;df.txt</span></span><br><span class="line"><span class="meta">&gt;</span><span class="bash">&gt;&gt;cat df.txt</span></span><br><span class="line">文件系统   容量  已用  可用  已用%  挂载点</span><br><span class="line">/dev/sda1  78G   15G   59G   21%    /</span><br></pre></td></tr></table></figure>

<ul>
<li>面试题：统计这段语句中，单词中字符数小于6的单词，显示出来</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">echo I am oldboy teacher welcome to oldboy training class.</span><br><span class="line"></span><br><span class="line">echo I am oldboy teacher welcome to oldboy training class. |awk -F&quot;[ .]&quot; &#x27;&#123;for(i=1;i&lt;=NF;i++)if(length($i)&lt;6)print $i&#125;&#x27;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

</article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">YQQ</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="https://jason177.com/2022/05/25/linuxthree/">https://jason177.com/2022/05/25/linuxthree/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://jason177.com" target="_blank">Jughead YQQ</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/LinuxTree/">LinuxTree</a></div><div class="post_share"><div class="social-share" data-image="https://cdn.jsdelivr.net/gh/xssqg/image/202203040526746.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js/dist/css/share.min.css" media="print" onload="this.media='all'"><script src="https://cdn.jsdelivr.net/npm/social-share.js/dist/js/social-share.min.js" defer></script></div></div><div class="post-reward"><div class="reward-button button--animated"><i class="fas fa-qrcode"></i> 打赏</div><div class="reward-main"><ul class="reward-all"><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/xssqg/image/202109261620173.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/xssqg/image/202109261620173.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://cdn.jsdelivr.net/gh/xssqg/image/202109261624241.jpg" target="_blank"><img class="post-qr-code-img" src="https://cdn.jsdelivr.net/gh/xssqg/image/202109261624241.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div></div><nav class="pagination-post" id="pagination"><div class="prev-post pull-left"><a href="/2022/05/12/windows/"><img class="prev-cover" src="https://cdn.jsdelivr.net/gh/xssqg/image/202206151611273.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of previous post"><div class="pagination-info"><div class="label">上一篇</div><div class="prev_info">windows</div></div></a></div><div class="next-post pull-right"><a href="/2022/05/25/RE/"><img class="next-cover" src="https://cdn.jsdelivr.net/gh/xssqg/image/202203040526746.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">RE</div></div></a></div></nav><hr/><div id="post-comment"><div class="comment-head"><div class="comment-headline"><i class="fas fa-comments fa-fw"></i><span> 评论</span></div></div><div class="comment-wrap"><div><div id="twikoo-wrap"></div></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="https://cdn.jsdelivr.net/gh/xssqg/image/1.jpeg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Jughead YQQ</div><div class="author-info__description"></div></div><div class="card-info-data"><div class="card-info-data-item is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">16</div></a></div><div class="card-info-data-item is-center"><a href="/tags/"><div class="headline">标签</div><div class="length-num">15</div></a></div><div class="card-info-data-item is-center"><a href="/categories/"><div class="headline">分类</div><div class="length-num">10</div></a></div></div><a class="button--animated" id="card-info-btn" target="_blank" rel="noopener" href="https://weibo.com/u/5263814707"><i class="fab fa-weibo"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xssqg" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:xssqg7571@gmail.com" target="_blank" title="Gmail"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://t.me/xssqg" target="_blank" title="Telegram"><i class="fab fa-telegram"></i></a><a class="social-icon" href="https://twitter.com/757172041" target="_blank" title="Twitter"><i class="fab fa-twitter"></i></a><a class="social-icon" href="https://www.facebook.com/JudheadYQQ/" target="_blank" title="FB"><i class="fab fa-facebook"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn card-announcement-animation"></i><span>公告</span></div><div class="announcement_content">在文章下面或者留言板可以发表评论喔，记得把邮箱留下来，这样我就可以回复你啦(交个朋友就行了，我是菜鸡，你问问题我也不会回你)请文明发言喔！！也可以关注我的其它社交软件私聊我</div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="fas fa-stream"></i><span>目录</span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#Linux%E4%B8%89%E5%89%91%E5%AE%A2%E7%89%B9%E7%82%B9%E4%B8%8E%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.</span> <span class="toc-text">Linux三剑客特点与应用场景</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#grep"><span class="toc-number">1.1.</span> <span class="toc-text">grep</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#H"><span class="toc-number">1.1.1.</span> <span class="toc-text">-H</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#c"><span class="toc-number">1.1.2.</span> <span class="toc-text">-c</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ABC"><span class="toc-number">1.1.3.</span> <span class="toc-text">-ABC</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#v"><span class="toc-number">1.1.4.</span> <span class="toc-text">-v</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#e%E5%92%8C-E"><span class="toc-number">1.1.5.</span> <span class="toc-text">-e和-E</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#f"><span class="toc-number">1.1.6.</span> <span class="toc-text">-f</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#w"><span class="toc-number">1.1.7.</span> <span class="toc-text">-w</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#o"><span class="toc-number">1.1.8.</span> <span class="toc-text">-o</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%A8%E6%AD%A3%E5%88%99%E8%BF%87%E6%BB%A4ip%E5%9C%B0%E5%9D%80"><span class="toc-number">1.1.9.</span> <span class="toc-text">用正则过滤ip地址</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sed%E6%9F%A5"><span class="toc-number">1.2.</span> <span class="toc-text">sed查</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#p"><span class="toc-number">1.2.1.</span> <span class="toc-text">-p</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#p-1"><span class="toc-number">1.2.2.</span> <span class="toc-text">&#x2F;&#x2F;p</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#r"><span class="toc-number">1.2.3.</span> <span class="toc-text">-r</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#n"><span class="toc-number">1.2.4.</span> <span class="toc-text">-n</span></a></li><li class="toc-item toc-level-3"><a class="toc-link"><span class="toc-number">1.2.5.</span> <span class="toc-text">!</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sed%E5%88%A0%E9%99%A4-d"><span class="toc-number">1.3.</span> <span class="toc-text">sed删除-d</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sed-%E5%A2%9E%E5%8A%A0cai"><span class="toc-number">1.4.</span> <span class="toc-text">sed-增加cai</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sed%E6%9B%BF%E6%8D%A2s"><span class="toc-number">1.5.</span> <span class="toc-text">sed替换s</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%8A%8A%E6%95%B0%E6%8D%AE%E8%A7%84%E5%88%99%E5%8C%96-%E6%AF%94%E5%A6%82%E6%AF%8F%E8%A1%8C%E7%94%A8%E6%8B%AC%E5%8F%B7%E6%8B%AC%E8%B5%B7%E6%9D%A5"><span class="toc-number">1.5.1.</span> <span class="toc-text">1.把数据规则化(比如每行用括号括起来)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-%E8%B0%83%E6%8D%A2%E4%BD%8D%E7%BD%AE"><span class="toc-number">1.5.2.</span> <span class="toc-text">2.调换位置</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%8F%96ip%E5%9C%B0%E5%9D%80"><span class="toc-number">1.5.3.</span> <span class="toc-text">3.取ip地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-%E5%8F%96%E6%9D%83%E9%99%90644"><span class="toc-number">1.5.4.</span> <span class="toc-text">4.取权限644</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#i"><span class="toc-number">1.5.5.</span> <span class="toc-text">-i</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#i-bak"><span class="toc-number">1.5.6.</span> <span class="toc-text">-i.bak</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#sed%E7%9A%84%E4%B8%80%E4%BA%9B%E6%9A%82%E6%97%B6%E7%9C%8B%E4%B8%8D%E6%87%82%E7%9A%84%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4"><span class="toc-number">1.6.</span> <span class="toc-text">sed的一些暂时看不懂的操作命令</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E7%A4%BA%E8%A1%8C%E5%8F%B7-%E5%85%B6%E5%AE%9E%E5%BA%94%E8%AF%A5%E5%B0%B1%E6%98%AF%E6%9B%BF%E6%8D%A2%E7%9A%84%E6%93%8D%E4%BD%9C"><span class="toc-number">1.6.1.</span> <span class="toc-text">显示行号(其实应该就是替换的操作)</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#awk"><span class="toc-number">1.7.</span> <span class="toc-text">awk</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%8C%E4%B8%8E%E5%88%97"><span class="toc-number">1.7.1.</span> <span class="toc-text">行与列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8F%96%E5%87%BAip%E5%9C%B0%E5%9D%80"><span class="toc-number">1.7.2.</span> <span class="toc-text">取出ip地址</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A8%A1%E5%BC%8F%E5%8C%B9%E9%85%8D"><span class="toc-number">1.7.3.</span> <span class="toc-text">模式匹配</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%88%99"><span class="toc-number">1.7.3.1.</span> <span class="toc-text">正则</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%89%BE%E5%87%BA%E7%AC%AC%E4%B8%89%E5%88%97%E4%BB%A52%E5%BC%80%E5%A4%B4%E7%9A%84%E8%A1%8C%EF%BC%8C%E5%B9%B6%E6%98%BE%E7%A4%BA%E7%AC%AC%E4%B8%80%E5%88%97%E7%AC%AC%E4%B8%89%E5%88%97%E5%92%8C%E6%9C%80%E5%90%8E%E4%B8%80%E5%88%97"><span class="toc-number">1.7.3.2.</span> <span class="toc-text">找出第三列以2开头的行，并显示第一列第三列和最后一列</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%8F%96%E8%8C%83%E5%9B%B4"><span class="toc-number">1.7.3.3.</span> <span class="toc-text">&#x2F;&#x2F;,&#x2F;&#x2F;取范围</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E6%A8%A1%E5%BC%8FBEGIN-%E5%92%8CEND"><span class="toc-number">1.7.3.4.</span> <span class="toc-text">特殊模式BEGIN{}和END{}</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#awk%E6%95%B0%E7%BB%84"><span class="toc-number">1.7.4.</span> <span class="toc-text">awk数组</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#awk-for%E5%BE%AA%E7%8E%AF"><span class="toc-number">1.7.5.</span> <span class="toc-text">awk(for循环)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#awk-if%E5%88%A4%E6%96%AD"><span class="toc-number">1.7.6.</span> <span class="toc-text">awk(if判断)</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2022/05/25/RE/" title="RE"><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202203040526746.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="RE"/></a><div class="content"><a class="title" href="/2022/05/25/RE/" title="RE">RE</a><time datetime="2022-05-25T08:12:41.000Z" title="发表于 2022-05-25 16:12:41">2022-05-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/25/linuxthree/" title="Linux三剑客的基础学习"><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202203040526746.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux三剑客的基础学习"/></a><div class="content"><a class="title" href="/2022/05/25/linuxthree/" title="Linux三剑客的基础学习">Linux三剑客的基础学习</a><time datetime="2022-05-25T08:06:27.000Z" title="发表于 2022-05-25 16:06:27">2022-05-25</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/05/12/windows/" title="windows"><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202206151611273.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="windows"/></a><div class="content"><a class="title" href="/2022/05/12/windows/" title="windows">windows</a><time datetime="2022-05-12T05:01:26.000Z" title="发表于 2022-05-12 13:01:26">2022-05-12</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/20/helpby/" title="轻量的数据脱敏工具"><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202203201445517.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="轻量的数据脱敏工具"/></a><div class="content"><a class="title" href="/2022/03/20/helpby/" title="轻量的数据脱敏工具">轻量的数据脱敏工具</a><time datetime="2022-03-20T05:35:06.000Z" title="发表于 2022-03-20 13:35:06">2022-03-20</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2022/03/06/cs/" title="cs"><img src="https://cdn.jsdelivr.net/gh/xssqg/image/202203040526746.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="cs"/></a><div class="content"><a class="title" href="/2022/03/06/cs/" title="cs">cs</a><time datetime="2022-03-06T04:47:35.000Z" title="发表于 2022-03-06 12:47:35">2022-03-06</time></div></div></div></div></div></div></main><footer id="footer" style="background: rgba(255,255,255,.0)"><div id="footer-wrap"><div class="copyright">&copy;2021 - 2022 By Jughead YQQ</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div><div class="footer_custom_text">Welcome To 一名靓仔的 <a href="https://jason177.com">Blog</a>!<br>桂ICP备：没有喔宝贝</div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="fas fa-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">簡</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="fas fa-list-ul"></i></button><a id="to_comment" href="#post-comment" title="直达评论"><i class="fas fa-comments"></i></a><button id="go-up" type="button" title="回到顶部"><i class="fas fa-arrow-up"></i></button></div></div><div id="local-search"><div class="search-dialog"><div class="search-dialog__title" id="local-search-title">本地搜索</div><div id="local-input-panel"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div></div><hr/><div id="local-search-results"></div><span class="search-close-button"><i class="fas fa-times"></i></span></div><div id="search-mask"></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="/js/search/local-search.js"></script><div class="js-pjax"><script>(()=>{
  const $countDom = document.getElementById('twikoo-count')
  const init = () => {
    twikoo.init(Object.assign({
      el: '#twikoo-wrap',
      envId: 'https://twikoo-aanpuy89j-xssqg.vercel.app/',
      region: ''
    }, null))
  }

  const getCount = () => {
    twikoo.getCommentsCount({
      envId: 'https://twikoo-aanpuy89j-xssqg.vercel.app/',
      region: '',
      urls: [window.location.pathname],
      includeReply: false
    }).then(function (res) {
      $countDom.innerText = res[0].count
    }).catch(function (err) {
      console.error(err);
    });
  }

  const loadTwikoo = (bool = false) => {
    if (typeof twikoo === 'object') {
      init()
      bool && $countDom && setTimeout(getCount,0)
    } else {
      getScript('https://cdn.jsdelivr.net/npm/twikoo/dist/twikoo.all.min.js').then(()=> {
        init()
        bool && $countDom && setTimeout(getCount,0)
      })
    }
  }

  if ('Twikoo' === 'Twikoo' || !false) {
    if (false) btf.loadComment(document.getElementById('twikoo-wrap'), loadTwikoo)
    else loadTwikoo(true)
  } else {
    window.loadOtherComment = () => {
      loadTwikoo()
    }
  }
})()</script></div><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div></body></html>